{"version":3,"sources":["public/Workflow-Builder/tasksRunner.ts","app.js","index.ts"],"names":["http","require","fs","path","mimeTypes","app","createServer","request","response","filePath","join","__dirname","url","extname","String","toLowerCase","contentType","readFile","error","content","writeHead","end","code","module","exports"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["type Task = () => Promise<any>;\n\ntype TaskDefinition = {\n    task: Task,\n    dependencies?: TaskDefinition[],\n};\n\nfunction getTasksRunner() {\n    let taskIdCounter = 0;\n    const allTasks: Record<number, Promise<any>> = {};\n\n    function addTask(task: Task, dependencies: number[] = []) {\n        const taskId = taskIdCounter++;\n        const dependentPromises = dependencies.map((id) => allTasks[id]);\n        allTasks[taskId] = Promise.all(dependentPromises).then(task);\n        return taskId;\n    }\n\n    function buildStrictWorkflow(tasks: Task[], dependencies: number[] = []) {\n        const taskIds = tasks.map((task) => addTask(task, dependencies));\n        return {\n            doNext: (tasks: Task[]) => buildStrictWorkflow(tasks, taskIds)\n        };\n    }\n\n    function defineTaskPurpose(taskDefinition: TaskDefinition) {\n        const { task, dependencies } = taskDefinition;\n        const dependentPromises: number[] = dependencies?.map(defineTaskPurpose) ?? [];\n        return addTask(task, dependentPromises);\n    }\n\n    function determineDependencyLevels(dependencies: Record<string, string[]>) {\n        const totalTasks = Object.keys(dependencies).length;\n        const depsClone = { ...dependencies };\n        const dependencyLevels: string[][] = [];\n        const leveledTasks: string[] = [];\n\n        while (leveledTasks.length < totalTasks) {\n            const currentLevel: string[] = [];\n\n            Object.entries(depsClone).forEach(([name, deps]) => {\n                const canBeLeveled = deps.every(dep => leveledTasks.includes(dep));\n                if (canBeLeveled && !leveledTasks.includes(name)) {\n                    currentLevel.push(name);\n                    leveledTasks.push(name);\n                }\n            });\n\n            if (currentLevel.length === 0) {\n                throw new Error(\"Circular dependency detected or the task structure is unresolvable.\");\n            }\n            currentLevel.forEach(task => {\n                delete depsClone[task];\n            });\n\n            dependencyLevels.push(currentLevel);\n        }\n\n        return dependencyLevels;\n    }\n\n    function configureTaskGraph<T extends Record<string, Task>>(graph: T, dependencies: Record<keyof T, (keyof T)[]>) {\n        const dependencyLevels = determineDependencyLevels(dependencies as Record<string, string[]>);\n\n        const firedTaskIds: Record<string, number> = {};\n        dependencyLevels.forEach(level => {\n            level.forEach(task => {\n                const mappedDependencies = dependencies[task].map((taskName) => firedTaskIds[taskName as string]);\n                firedTaskIds[task] = addTask(graph[task], mappedDependencies);\n            });\n        });\n    }\n\n    return {\n        addTask,\n        buildStrictWorkflow,\n        defineTaskPurpose,\n        configureTaskGraph\n    };\n}\n\nexport default getTasksRunner();\n","const http = require('http');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst mimeTypes = {\r\n  '.html': 'text/html',\r\n  '.js': 'text/javascript',\r\n  '.css': 'text/css',\r\n  '.json': 'application/json',\r\n  '.png': 'image/png',\r\n  '.jpg': 'image/jpg',\r\n  '.gif': 'image/gif',\r\n  '.wav': 'audio/wav',\r\n  '.mp4': 'video/mp4',\r\n  '.woff': 'application/font-woff',\r\n  '.ttf': 'application/font-ttf',\r\n  '.eot': 'application/vnd.ms-fontobject',\r\n  '.otf': 'application/font-otf',\r\n  '.svg': 'application/image/svg+xml',\r\n};\r\n\r\nconst app = http.createServer((request, response) => {\r\n  let filePath = path.join(__dirname, 'public', request.url);\r\n  if (filePath === path.join(__dirname, 'public', '/')) filePath = path.join(__dirname, 'public', 'index.html');\r\n\r\n  const extname = String(path.extname(filePath)).toLowerCase();\r\n  const contentType = mimeTypes[extname] || 'application/octet-stream';\r\n\r\n  fs.readFile(filePath, (error, content) => {\r\n    if (error) {\r\n      response.writeHead(500);\r\n      response.end(`Sorry, check with the site admin for error: ${error.code} ..\\n`);\r\n      response.end();\r\n    } else {\r\n      response.writeHead(200, { 'Content-Type': contentType });\r\n      response.end(content, 'utf-8');\r\n    }\r\n  });\r\n});\r\n\r\nmodule.exports = app;\r\n","import tasksRunner from './public/Workflow-Builder/tasksRunner';\r\n\r\nconst app = require('./app');\r\n\r\nconst port = '8888';\r\n\r\nconst manuallySetTasksDependencies = () => {\r\n  const taskId1 = tasksRunner.addTask(() => {\r\n    return new Promise<void>((resolve) => {\r\n      console.log('Task 1: yay');\r\n      setTimeout(() => {\r\n        console.log('Task 1 completed');\r\n        resolve();\r\n      }, 3000); \r\n    });\r\n  });\r\n\r\n  const taskId2 = tasksRunner.addTask(() => {\r\n    return new Promise<void>((resolve) => {\r\n      console.log('Task 2: wow');\r\n      setTimeout(() => {\r\n        console.log('Task 2 completed');\r\n        resolve();\r\n      }, 2000); \r\n    });\r\n  }, [taskId1]);\r\n}\r\n\r\nconst useStrictWorkflowLogic = () => {\r\n  const workflowTask = tasksRunner.buildStrictWorkflow([\r\n    () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Workflow Task 1: Executing task 1');\r\n        setTimeout(() => {\r\n          console.log('Workflow Task 1 completed');\r\n          resolve();\r\n        }, 1500); \r\n      });\r\n    },\r\n    () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Workflow Task 2: Executing task 2');\r\n        setTimeout(() => {\r\n          console.log('Workflow Task 2 completed');\r\n          resolve();\r\n        }, 1000); \r\n      });\r\n    }\r\n  ]).doNext([\r\n    () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Workflow Task 3: Executing task 3');\r\n        setTimeout(() => {\r\n          console.log('Workflow Task 3 completed');\r\n          resolve();\r\n        }, 2500); \r\n      });\r\n    }\r\n  ]).doNext([\r\n    () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Workflow Task 4: Executing task 4');\r\n        setTimeout(() => {\r\n          console.log('Workflow Task 4 completed');\r\n          resolve();\r\n        }, 500); \r\n      });\r\n    },\r\n    () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Workflow Task 5: Executing task 5');\r\n        setTimeout(() => {\r\n          console.log('Workflow Task 5 completed');\r\n          resolve();\r\n        }, 2500); \r\n      });\r\n    },\r\n    () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Workflow Task 6: Executing task 6');\r\n        setTimeout(() => {\r\n          console.log('Workflow Task 6 completed');\r\n          resolve();\r\n        }, 1500); \r\n      });\r\n    },\r\n  ]).doNext([\r\n    () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Workflow Task 7: Executing task 7');\r\n        setTimeout(() => {\r\n          console.log('Workflow Task 7 completed');\r\n          resolve();\r\n        }, 1000); \r\n      });\r\n    }\r\n  ]);\r\n}\r\n\r\nconst usePurposeFlow = () => {\r\n  const purposeTaskId = tasksRunner.defineTaskPurpose({\r\n    task: () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Purpose Task: Running purpose task');\r\n        setTimeout(() => {\r\n          console.log('Purpose Task completed');\r\n          resolve();\r\n        }, 2000); \r\n      });\r\n    },\r\n    dependencies: [\r\n      {\r\n        task: () => {\r\n          return new Promise<void>((resolve) => {\r\n            console.log('Dependent Task A: Running dependent task A');\r\n            setTimeout(() => {\r\n              console.log('Dependent Task A completed');\r\n              resolve();\r\n            }, 1000); \r\n          });\r\n        }\r\n      },\r\n      {\r\n        task: () => {\r\n          return new Promise<void>((resolve) => {\r\n            console.log('Dependent Task B: Running dependent task B');\r\n            setTimeout(() => {\r\n              console.log('Dependent Task B completed');\r\n              resolve();\r\n            }, 1500); \r\n          });\r\n        },\r\n        dependencies: [\r\n          {\r\n            task: () => {\r\n              return new Promise<void>((resolve) => {\r\n                console.log('Dependent Task C: Running dependent task C');\r\n                setTimeout(() => {\r\n                  console.log('Dependent Task C completed');\r\n                  resolve();\r\n                }, 800); \r\n              });\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  });\r\n}\r\n\r\nconst useGraphDenpendenciesLogic = () => {\r\n  tasksRunner.configureTaskGraph({\r\n    taskA: () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Task A: Executing task A');\r\n        setTimeout(() => {\r\n          console.log('Task A completed');\r\n          resolve();\r\n        }, 3000);\r\n      });\r\n    },\r\n    taskB: () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Task B: Executing task B');\r\n        setTimeout(() => {\r\n          console.log('Task B completed');\r\n          resolve();\r\n        }, 2500); \r\n      });\r\n    },\r\n    taskC: () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Task C: Executing task C');\r\n        setTimeout(() => {\r\n          console.log('Task C completed');\r\n          resolve();\r\n        }, 1500); \r\n      });\r\n    },\r\n    taskD: () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Task D: Executing task D');\r\n        setTimeout(() => {\r\n          console.log('Task D completed');\r\n          resolve();\r\n        }, 2000); \r\n      });\r\n    },\r\n    taskE: () => {\r\n      return new Promise<void>((resolve) => {\r\n        console.log('Task E: Executing task E');\r\n        setTimeout(() => {\r\n          console.log('Task E completed');\r\n          resolve();\r\n        }, 1200); \r\n      });\r\n    }\r\n  }, {\r\n    taskA: [],\r\n    taskB: ['taskA'],   \r\n    taskC: [],     \r\n    taskD: ['taskB'],     \r\n    taskE: ['taskC', 'taskD']  \r\n  });\r\n}\r\n\r\napp.listen(port, () => {\r\n  console.log(`Start runnin exmaple`);\r\n  //manuallySetTasksDependencies();\r\n  //useStrictWorkflowLogic();\r\n  //usePurposeFlow();\r\n  useGraphDenpendenciesLogic();\r\n});\r\n"]}